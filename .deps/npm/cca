/**
 * Minified by jsDelivr using Terser v5.19.2.
 * Original file: /npm/cca@0.8.1/src/cca.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
#!/usr/bin/env node
var fs=require("fs"),path=require("path"),Q=require("q"),updateNotifier=require("update-notifier"),utils=require("./utils"),origDir=process.cwd(),ccaRoot=path.join(__dirname,".."),cordova=require("cordova"),cordovaLib=cordova.cordova_lib,hooks=require("./hooks");function main(){cordovaLib.binname="cca";var e=require("./parse-command-line")();utils.exit.pause_on_exit=e.pause_on_exit;var r=require("../package.json");updateNotifier({pkg:r,updateCheckInterval:864e5}).notify();var o=e._[0],n=require("../package").version;function i(){console.log("cca v"+n)}if(utils.colorizeConsole(),hooks.registerHooks(),"exec"==o)return require("./tools-check").fixEnv().then((function(){require("./exec")(process.argv.slice(3))})).done(null,utils.fatal);function t(){return function(){var e=[];if(-1==process.argv.indexOf("android")||fs.existsSync(path.join("platforms","android"))||e.push("android"),-1==process.argv.indexOf("ios")||fs.existsSync(path.join("platforms","ios"))||e.push("ios"),0===e.length)return Q();var r=require("optimist").options("link",{type:"boolean"}).options("verbose",{type:"boolean",alias:"d"}).argv,o={link:r.link,verbose:r.verbose};return require("./cordova-commands").runCmd(["platform","add",e,o]).then(require("./write-out-cca-version"))}().then((function(){if(!e["skip-upgrade"])return fs.existsSync(path.join("www","manifest.json"))?require("./upgrade-project").upgradeProjectIfStale(e.y):Q.reject("This is not a cca project (no www/manifest.json file). Perhaps you meant to use the cordova-cli?")}))}function a(){return cordovaLib.events.removeListener("results",console.log),cordovaLib.events.removeListener("log",console.log),cordovaLib.events.removeListener("warn",console.warn),cordovaLib.events.removeListener("verbose",console.log),cordova.cli(process.argv)}function s(){return i(),t().then(a)}e.v&&(o="version"),!e.h&&o||(o="help");var c={"pre-prepare":function(){return require("./pre-prepare")()},"update-app":function(){return c["post-prepare"]()},"post-prepare":function(){return require("./post-prepare")()},checkenv:function(){return i(),require("./tools-check")()},push:function(){return i(),Q.fcall((function(){var r=e._[1]||"";return r?(require("optimist").showHelp(console.log),Q.reject('Flag "'+r+'" not understood.  Did you mean `--target='+r+"`?")):require("./push-to-harness")(e.target,e.watch)}))},run:function(){i();var r=e._[1];return"chrome"===r||"canary"===r?require("./run-in-chrome")(r):t().then(a)},create:function(){return i(),Q.fcall((function(){var r=e._[1]||"";if(!r)return require("optimist").showHelp(console.log),Q.reject("No output directory given.");r=path.resolve(r);var o=e._[2]||"",n=e._[3]||"";return require("./create-app")(r,ccaRoot,origDir,o,n,e)}))},upgrade:function(){return i(),require("./upgrade-project").upgradeProject(!0)},version:function(){return console.log(n),Q.when()},help:function(){return i(),require("optimist").showHelp(console.log),Q.when()},plugin:s,plugins:function(){return c.plugin.apply(this,arguments)},platform:function(){return i(),a()},platforms:function(){return c.platform.apply(this,arguments)},analytics:function(){return Q.when()},build:s,compile:s,emulate:s,prepare:s,serve:s};cordovaLib.cordova.config.setAutoPersist(!1);var u=cordovaLib.cordova.findProjectRoot();u&&(cordovaLib.cordova.config(u,require("./default-config")(ccaRoot)),process.chdir(u)),c.hasOwnProperty(o)||utils.fatal("Invalid command: "+o+". Use --help for usage."),e.d&&(cordovaLib.events.on("results",console.log),cordovaLib.events.on("log",console.log),cordovaLib.events.on("warn",console.warn),cordovaLib.events.on("verbose",console.log));var l=require("./analytics-loader");"analytics"===o&&l.analyticsCommand(e._[1]),e["android-minSdkVersion"]&&(process.env.ORG_GRADLE_PROJECT_cdvMinSdkVersion=e["android-minSdkVersion"]),l.getAnalyticsModule().then((function(e){e.sendEvent("cca",o)})).then(c[o]).then(null,(function(e){if(!(e instanceof cordovaLib.CordovaError))throw e;utils.fatal(e.message.replace(/\bcordova /,"cca "))})).done()}require.main===module?main():module.exports.parseCLI=main;
//# sourceMappingURL=/sm/4d0521b74a1ea011a72788d999de0606c619a2c0381164f50f7674ff1b7ba6f5.map